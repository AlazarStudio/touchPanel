<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Выставка Верховный суд КЧР</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="main">
        <div class="backButton">
            <a href="/pages/rayonnie_sudi_regiona.html">
                <img src="../ref/arrow_back.png" alt="">
            </a>
        </div>

        <div class="topPicture"></div>

        <div class="title topName"></div>

        <div class="text"></div>


        <div class="title">
            Председатели
        </div>

        <div class="main_info">
            <div class="widthBlock">
                <div class="descBlock_items"></div>
            </div>
        </div>

        <div class="title">
            Галерея
        </div>

        <div class="vs_slider"></div>
    </div>

    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <div class="modal-content">
            <img id="modalImage" src="" alt="">
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-element-bundle.min.js"></script>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const paramValue = urlParams.get('id');

        fetch('../js/regions.json')
            .then(response => response.text())
            .then(info => {
                let data = JSON.parse(info);
                let mass = [];

                data.forEach(element => {
                    if (element.id == paramValue) {
                        mass.push(element);
                    }
                });

                let predsedatels = '';
                mass[0].predsedatels.forEach(element => {
                    predsedatels = predsedatels + `
                        <a href="" class="descBlock_items__elem" style="margin-bottom: 0; cursor: unset;">
                            <div class="gapBlock">
                                <div class="descBlock_items__elem___img">
                                    <img src="../ref/${element.picture}" alt="">
                                </div>
                                <div class="descBlock_items__elem___title">
                                    ${element.title}
                                </div>
                            </div>
                        </a>
                    `;
                });

                let slider = mass[0].slider;
                let sliderStr = '';

                slider.forEach(element => {
                    sliderStr = sliderStr + `<swiper-slide><img src="../ref/${element}" alt=""></swiper-slide>`
                });

                $(".vs_slider").append(`
                    <swiper-container class="mySwiper1" navigation="true" space-between="30" slides-per-view="3" loop="true">
                        ${sliderStr}
                    </swiper-container>
                `)

                $(".topPicture").append(`<img src="../ref/${mass[0].topPicture}" alt="" style="width: 100%;">`);
                $(".topName").append(mass[0].title);
                $(".text").append(mass[0].text);
                $(".descBlock_items").append(predsedatels);


                $('swiper-slide img').on('click', function () {
                    var imgSrc = $(this).attr('src');
                    $('#modalImage').attr('src', imgSrc);
                    $('#myModal').css('display', 'flex');
                });

                $('.close').on('click', function () {
                    $('#myModal').css('display', 'none');
                });

                $(window).on('click', function (e) {
                    if ($(e.target).is('#myModal')) {
                        $('#myModal').css('display', 'none');
                    }
                });


            })
            .catch(error => console.error('Error fetching data:', error));


    </script>
</body>

</html>